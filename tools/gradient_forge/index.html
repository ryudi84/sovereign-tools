<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gradient Forge — CSS Gradient Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: #e2e8f0; min-height: 100vh; display: flex; flex-direction: column; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .header { padding: 16px 24px; border-bottom: 1px solid #1e293b; display: flex; align-items: center; justify-content: space-between; }
        .header h1 { font-size: 18px; font-weight: 700; display: flex; align-items: center; gap: 10px; }
        .header .icon { width: 32px; height: 32px; border-radius: 8px; background: linear-gradient(135deg, #ec4899, #8b5cf6, #06b6d4); }
        .main { flex: 1; display: flex; }
        .preview-area { flex: 1; display: flex; flex-direction: column; }
        .gradient-preview { flex: 1; min-height: 300px; position: relative; cursor: crosshair; transition: background 0.3s; }
        .preview-overlay { position: absolute; bottom: 16px; left: 16px; right: 16px; display: flex; justify-content: space-between; align-items: end; }
        .sidebar { width: 320px; border-left: 1px solid #1e293b; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 20px; }
        .section-title { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: #64748b; margin-bottom: 8px; }
        .btn { padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; border: none; transition: all 0.15s; font-family: inherit; }
        .btn-primary { background: #6366f1; color: white; }
        .btn-primary:hover { background: #4f46e5; }
        .btn-sm { padding: 6px 12px; font-size: 11px; }
        .btn-ghost { background: transparent; color: #94a3b8; border: 1px solid #334155; }
        .btn-ghost:hover { background: #1e293b; color: #e2e8f0; }
        select, input[type="number"] { background: #1e293b; color: #e2e8f0; border: 1px solid #334155; border-radius: 6px; padding: 6px 10px; font-size: 13px; font-family: inherit; width: 100%; }
        select:focus, input:focus { outline: none; border-color: #6366f1; }
        .color-stop { display: flex; align-items: center; gap: 8px; padding: 8px; background: #1e293b; border-radius: 8px; margin-bottom: 6px; }
        .color-stop input[type="color"] { width: 36px; height: 28px; border: none; border-radius: 4px; cursor: pointer; background: none; }
        .color-stop input[type="range"] { flex: 1; accent-color: #6366f1; }
        .color-stop .pos { width: 40px; text-align: center; font-size: 11px; color: #94a3b8; }
        .remove-stop { background: none; border: none; color: #64748b; cursor: pointer; font-size: 16px; padding: 0 4px; }
        .remove-stop:hover { color: #ef4444; }
        .code-block { background: #0f172a; border: 1px solid #1e293b; border-radius: 8px; padding: 12px; font-family: 'JetBrains Mono', monospace; font-size: 11px; word-break: break-all; line-height: 1.6; cursor: pointer; transition: border-color 0.2s; }
        .code-block:hover { border-color: #6366f1; }
        .presets { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; }
        .preset { width: 100%; aspect-ratio: 1; border-radius: 6px; cursor: pointer; border: 2px solid transparent; transition: all 0.15s; }
        .preset:hover { border-color: #6366f1; transform: scale(1.05); }
        .toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); background: #10b981; color: white; padding: 8px 20px; border-radius: 8px; font-size: 13px; font-weight: 600; opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 100; }
        .toast.show { opacity: 1; }
        .angle-control { display: flex; align-items: center; gap: 8px; }
        .angle-dial { width: 48px; height: 48px; border-radius: 50%; border: 2px solid #334155; position: relative; cursor: pointer; background: #1e293b; flex-shrink: 0; }
        .angle-needle { position: absolute; top: 50%; left: 50%; width: 2px; height: 40%; background: #6366f1; transform-origin: bottom center; border-radius: 1px; }
        .footer { text-align: center; padding: 12px; color: #475569; font-size: 11px; border-top: 1px solid #1e293b; }
    </style>
</head>
<body>
    <div class="header">
        <h1><div class="icon"></div> Gradient Forge <span style="font-size:11px;color:#64748b;font-weight:400;">by Sovereign AI</span></h1>
        <div style="display:flex;gap:8px;">
            <button class="btn btn-ghost btn-sm" onclick="randomize()">Randomize</button>
            <button class="btn btn-primary btn-sm" onclick="copyCSS()">Copy CSS</button>
        </div>
    </div>

    <div class="main">
        <div class="preview-area">
            <div id="gradientPreview" class="gradient-preview">
                <div class="preview-overlay">
                    <span style="font-size:11px;color:rgba(255,255,255,0.5);text-shadow:0 1px 3px rgba(0,0,0,0.5);">Click anywhere to add a color stop</span>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <!-- Type -->
            <div>
                <div class="section-title">Gradient Type</div>
                <select id="gradientType" onchange="updateGradient()">
                    <option value="linear">Linear</option>
                    <option value="radial">Radial</option>
                    <option value="conic">Conic</option>
                </select>
            </div>

            <!-- Angle -->
            <div id="angleSection">
                <div class="section-title">Angle</div>
                <div class="angle-control">
                    <div id="angleDial" class="angle-dial" onmousedown="startAngleDrag(event)">
                        <div id="angleNeedle" class="angle-needle"></div>
                    </div>
                    <input type="range" id="angleSlider" min="0" max="360" value="135" oninput="setAngle(this.value)" style="flex:1;">
                    <span id="angleValue" style="font-size:13px;min-width:40px;text-align:right;" class="mono">135°</span>
                </div>
            </div>

            <!-- Color Stops -->
            <div>
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                    <div class="section-title" style="margin-bottom:0;">Color Stops</div>
                    <button class="btn btn-ghost btn-sm" onclick="addStop()">+ Add</button>
                </div>
                <div id="stopsContainer"></div>
            </div>

            <!-- CSS Output -->
            <div>
                <div class="section-title">CSS Code</div>
                <div id="cssOutput" class="code-block" onclick="copyCSS()"></div>
                <p style="font-size:10px;color:#475569;margin-top:4px;">Click to copy</p>
            </div>

            <!-- Presets -->
            <div>
                <div class="section-title">Presets</div>
                <div class="presets" id="presetsGrid"></div>
            </div>

            <div class="footer">
                <a href="/store" style="color:#6366f1;text-decoration:none;">More Tools</a> |
                Tips: <code style="font-size:9px;color:#475569;">4uPS7vhkh6cgWEYJqgBQLApNXBnqW4KxuJg6MEzZNLVd</code>
            </div>
        </div>
    </div>

    <div id="toast" class="toast">Copied!</div>

    <script>
    let stops = [
        { color: '#6366f1', pos: 0 },
        { color: '#ec4899', pos: 50 },
        { color: '#06b6d4', pos: 100 }
    ];
    let angle = 135;
    let gradientType = 'linear';

    const presets = [
        [['#667eea',0],['#764ba2',100]],
        [['#f093fb',0],['#f5576c',100]],
        [['#4facfe',0],['#00f2fe',100]],
        [['#43e97b',0],['#38f9d7',100]],
        [['#fa709a',0],['#fee140',100]],
        [['#a18cd1',0],['#fbc2eb',100]],
        [['#fccb90',0],['#d57eeb',100]],
        [['#e0c3fc',0],['#8ec5fc',100]],
        [['#f5f7fa',0],['#c3cfe2',100]],
        [['#667eea',0],['#764ba2',100]],
        [['#ff9a9e',0],['#fecfef',50],['#fecfef',100]],
        [['#a1c4fd',0],['#c2e9fb',100]],
        [['#d4fc79',0],['#96e6a1',100]],
        [['#84fab0',0],['#8fd3f4',100]],
        [['#ffecd2',0],['#fcb69f',100]],
        [['#ff0844',0],['#ffb199',100]],
        [['#0c0c0c',0],['#1a1a2e',50],['#16213e',100]],
        [['#0f0c29',0],['#302b63',50],['#24243e',100]],
        [['#00c6ff',0],['#0072ff',100]],
        [['#f857a6',0],['#ff5858',100]],
    ];

    function renderStops() {
        const c = document.getElementById('stopsContainer');
        c.innerHTML = stops.map((s, i) => `
            <div class="color-stop">
                <input type="color" value="${s.color}" onchange="stops[${i}].color=this.value;updateGradient()">
                <input type="range" min="0" max="100" value="${s.pos}" oninput="stops[${i}].pos=+this.value;updateGradient();this.nextElementSibling.textContent=this.value+'%'">
                <span class="pos">${s.pos}%</span>
                ${stops.length > 2 ? `<button class="remove-stop" onclick="stops.splice(${i},1);renderStops();updateGradient()">×</button>` : ''}
            </div>
        `).join('');
    }

    function addStop() {
        const maxPos = Math.max(...stops.map(s => s.pos));
        const minPos = Math.min(...stops.map(s => s.pos));
        const newPos = Math.round((maxPos + minPos) / 2);
        const h = Math.random() * 360;
        const color = hslToHex(h, 70 + Math.random() * 20, 50 + Math.random() * 20);
        stops.push({ color, pos: newPos });
        stops.sort((a, b) => a.pos - b.pos);
        renderStops();
        updateGradient();
    }

    function hslToHex(h, s, l) {
        h /= 360; s /= 100; l /= 100;
        let r, g, b;
        if (s === 0) { r = g = b = l; } else {
            const f = (p, q, t) => { if (t < 0) t += 1; if (t > 1) t -= 1; if (t < 1/6) return p + (q - p) * 6 * t; if (t < 1/2) return q; if (t < 2/3) return p + (q - p) * (2/3 - t) * 6; return p; };
            const q = l < 0.5 ? l * (1 + s) : l + s - l * s; const p = 2 * l - q;
            r = f(p, q, h + 1/3); g = f(p, q, h); b = f(p, q, h - 1/3);
        }
        return '#' + [r, g, b].map(x => Math.round(x * 255).toString(16).padStart(2, '0')).join('');
    }

    function getGradientCSS() {
        const stopsStr = stops.map(s => `${s.color} ${s.pos}%`).join(', ');
        const type = document.getElementById('gradientType').value;
        if (type === 'linear') return `linear-gradient(${angle}deg, ${stopsStr})`;
        if (type === 'radial') return `radial-gradient(circle, ${stopsStr})`;
        if (type === 'conic') return `conic-gradient(from ${angle}deg, ${stopsStr})`;
    }

    function updateGradient() {
        const css = getGradientCSS();
        document.getElementById('gradientPreview').style.background = css;
        document.getElementById('cssOutput').textContent = `background: ${css};`;
        document.getElementById('angleSection').style.display =
            document.getElementById('gradientType').value === 'radial' ? 'none' : 'block';
    }

    function setAngle(v) {
        angle = parseInt(v);
        document.getElementById('angleSlider').value = v;
        document.getElementById('angleValue').textContent = v + '°';
        const needle = document.getElementById('angleNeedle');
        needle.style.transform = `rotate(${angle}deg)`;
        updateGradient();
    }

    function startAngleDrag(e) {
        const dial = document.getElementById('angleDial');
        const move = (ev) => {
            const rect = dial.getBoundingClientRect();
            const cx = rect.left + rect.width / 2;
            const cy = rect.top + rect.height / 2;
            const x = (ev.clientX || ev.touches?.[0]?.clientX) - cx;
            const y = (ev.clientY || ev.touches?.[0]?.clientY) - cy;
            let deg = Math.round(Math.atan2(x, -y) * 180 / Math.PI);
            if (deg < 0) deg += 360;
            setAngle(deg);
        };
        const up = () => { document.removeEventListener('mousemove', move); document.removeEventListener('mouseup', up); };
        document.addEventListener('mousemove', move);
        document.addEventListener('mouseup', up);
        move(e);
    }

    function copyCSS() {
        const css = `background: ${getGradientCSS()};`;
        navigator.clipboard.writeText(css);
        const t = document.getElementById('toast');
        t.textContent = 'CSS Copied!';
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 1500);
    }

    function randomize() {
        const n = 2 + Math.floor(Math.random() * 3);
        stops = [];
        for (let i = 0; i < n; i++) {
            stops.push({
                color: hslToHex(Math.random() * 360, 60 + Math.random() * 30, 40 + Math.random() * 30),
                pos: Math.round(i * 100 / (n - 1))
            });
        }
        angle = Math.round(Math.random() * 360);
        setAngle(angle);
        renderStops();
        updateGradient();
    }

    function loadPreset(preset) {
        stops = preset.map(([color, pos]) => ({ color, pos }));
        renderStops();
        updateGradient();
    }

    function renderPresets() {
        const grid = document.getElementById('presetsGrid');
        grid.innerHTML = presets.map((p, i) => {
            const stopsStr = p.map(([c, pos]) => `${c} ${pos}%`).join(', ');
            return `<div class="preset" style="background:linear-gradient(135deg,${stopsStr});" onclick="loadPreset(presets[${i}])"></div>`;
        }).join('');
    }

    // Keyboard shortcut
    document.addEventListener('keydown', e => {
        if (e.code === 'Space' && e.target.tagName !== 'INPUT') { e.preventDefault(); randomize(); }
    });

    renderStops();
    renderPresets();
    updateGradient();
    setAngle(135);
    </script>
</body>
</html>
